(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(34),i=n.n(a),r=(n(72),n(21)),l=(n(73),n(39)),o=n(23),u=n(35),d=n.n(u),j={sockets:[new d.a.WebSocketInterface("wss://sbc03.tel4vn.com:7444")],uri:"sip:106@2-test1.gcalls.vn:50061",password:"test1106",no_answer_timeout:3e3,register_expires:300,session_timers:!1},b=new d.a.UA(j);b.start();var m=b,O=n(43),f=n.n(O),h="https://hoaiancallapp.herokuapp.com",v=n(1),p=function(e){var t=e.socket,n=Object(c.useState)(""),s=Object(r.a)(n,2),a=s[0],i=s[1],u=Object(c.useState)(void 0),d=Object(r.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(!1),f=Object(r.a)(O,2),h=f[0],p=f[1],x=Object(c.useRef)();Object(c.useEffect)((function(){t.emit("send session",localStorage.session)}),[]);var g=Object(o.c)((function(e){return e.callStatus})),N=Object(o.b)(),k={eventHandlers:{progress:function(e){N({type:"calling"})},failed:function(e){N({type:"failed"}),setTimeout((function(){N({type:"disable"})}),2e4)},ended:function(e){N({type:"ended"}),setTimeout((function(){N({type:"disable"})}),2e4),p(!1)},confirmed:function(e){N({type:"callstart",payload:a})}},mediaConstraints:{audio:!0,video:!1},pcConfig:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]}};m.on("newRTCSession",(function(e){N({type:"connect"});var t=e.session;b(t),t.on("confirmed",(function(){})),t.on("ended",(function(){})),t.on("failed",(function(){})),t.connection.addEventListener("addstream",(function(e){var t=document.createElement("audio");t.srcObject=e.stream,t.play()}))}));var C=function(e){if("Escape"==e)return j.terminate(),void p(!1);if("Backspace"!=e){if("Enter"==e)return""==a?(setTimeout((function(){N({type:"disable"})}),2e4),void N({type:"error"})):(t=a,m.call(t,k),void p(!0));var t;(e<"0"||e>"9")&&"*"!=e&&"#"!=e||i(a+e)}else if(a.length>0){var n=a.substring(0,a.length-1);i(n)}};return Object(v.jsxs)("div",{className:"dial-pad",children:[Object(v.jsxs)("div",{className:"phonenumber",children:[Object(v.jsx)("input",{type:"text",placeholder:"Type phone number",className:"phonenumber-input",value:a,onKeyDown:function(e){return C(e.key)}}),Object(v.jsx)(l.a,{className:"backspace",onClick:function(){return C("Backspace")}})]}),Object(v.jsx)("div",{className:"line"}),Object(v.jsx)("div",{className:"call-status",children:g}),Object(v.jsxs)("div",{className:"grid-number",children:[Object(v.jsx)("div",{className:"number",onClick:function(){return C("1")},children:"1"}),Object(v.jsxs)("div",{className:"number",onClick:function(){return C("2")},children:["2",Object(v.jsx)("div",{className:"text",children:"ABC"})]}),Object(v.jsxs)("div",{className:"number",onClick:function(){return C("3")},children:["3",Object(v.jsx)("div",{className:"text",children:"DEF"})]}),Object(v.jsxs)("div",{className:"number",onClick:function(){return C("4")},children:["4",Object(v.jsx)("div",{className:"text",children:"GHI"})]}),Object(v.jsxs)("div",{className:"number",onClick:function(){return C("5")},children:["5",Object(v.jsx)("div",{className:"text",children:"JKL"})]}),Object(v.jsxs)("div",{className:"number",onClick:function(){return C("6")},children:["6",Object(v.jsx)("div",{className:"text",children:"MNO"})]}),Object(v.jsxs)("div",{className:"number",onClick:function(){return C("7")},children:["7",Object(v.jsx)("div",{className:"text",children:"PQRS"})]}),Object(v.jsxs)("div",{className:"number",onClick:function(){return C("8")},children:["8",Object(v.jsx)("div",{className:"text",children:"TUV"})]}),Object(v.jsxs)("div",{className:"number",onClick:function(){return C("9")},children:["9",Object(v.jsx)("div",{className:"text",children:"WXYZ"})]}),Object(v.jsx)("div",{className:"number",onClick:function(){return C("*")},children:"*"}),Object(v.jsx)("div",{className:"number",onClick:function(){return C("0")},children:"0"}),Object(v.jsx)("div",{className:"number",onClick:function(){return C("#")},children:"#"})]}),0==h?Object(v.jsx)("div",{className:"call-btn",onClick:function(){return C("Enter")},children:Object(v.jsx)(l.b,{})}):Object(v.jsx)("div",{className:"off-btn",onClick:function(){return C("Escape")},children:Object(v.jsx)(l.b,{})}),Object(v.jsx)("audio",{ref:x,type:"audio"})]})},x=(n(123),n(2)),g=function(){var e=Object(x.e)().search,t=new URLSearchParams(e).get("session"),n=Object(o.b)();return Object(c.useEffect)((function(){t?f.a.get("".concat(h,"/checksession?session=").concat(t)).then((function(e){"session success"==e.data.status?(n({type:"login"}),n({type:"load"}),localStorage.session=t):alert("Login Failed")})):window.location.href="".concat("https://hoaianlogin.surge.sh","?URL=").concat("https://hoaiancallapp.surge.sh")}),[]),Object(v.jsx)("div",{className:"auth"})};var N=function(e){var t=e.socket,n=Object(o.c)((function(e){return e.login}));return Object(v.jsx)("div",{className:"App",children:n?Object(v.jsx)(p,{socket:t}):Object(v.jsx)(g,{})})},k=n(67),C={callStatus:"",incall:!1,login:!1,load:!1},y=Object(k.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"disable":return Object.assign({},e,{callStatus:""});case"calling":return Object.assign({},e,{callStatus:"Calling..."});case"error":return Object.assign({},e,{callStatus:"Phone number empty !!!"});case"ended":return Object.assign({},e,{callStatus:"Call ended"});case"callstart":return Object.assign({},e,{callStatus:"Call with ".concat(t.payload)});case"connect":return Object.assign({},e,{callStatus:"Connecting"});case"failed":return Object.assign({},e,{callStatus:"Failed"});case"login":return Object.assign({},e,{login:!0});case"load":return Object.assign({},e,{load:!0});default:return e}})),S=y,w=n(66),E=Object(w.a)(h),T=n(44);i.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(o.a,{store:S,children:Object(v.jsx)(T.a,{children:Object(v.jsx)(x.c,{children:Object(v.jsx)(x.a,{path:"/",exact:!0,element:Object(v.jsx)(N,{socket:E})})})})})}),document.getElementById("root"))},72:function(e,t,n){},73:function(e,t,n){}},[[129,1,2]]]);
//# sourceMappingURL=main.7e60a6b5.chunk.js.map