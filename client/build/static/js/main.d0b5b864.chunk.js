(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(33),i=n.n(a),r=(n(68),n(15)),o=(n(69),n(37)),l=n(19),u=n(34),d=n.n(u),j={sockets:[new d.a.WebSocketInterface("wss://sbc03.tel4vn.com:7444")],uri:"sip:106@2-test1.gcalls.vn:50061",password:"test1106",no_answer_timeout:3e3,register_expires:300,session_timers:!1},b=new d.a.UA(j);b.start();var m=b,O=n(24),f=n.n(O),p="https://hoaiancallapp.herokuapp.com",h=n(1),v=function(e){var t=e.socket,n=Object(c.useState)(""),s=Object(r.a)(n,2),a=s[0],i=s[1],u=Object(c.useState)(void 0),d=Object(r.a)(u,2),j=d[0],b=d[1],O=Object(c.useState)(!1),f=Object(r.a)(O,2),p=f[0],v=f[1],x=Object(c.useRef)();Object(c.useEffect)((function(){t.emit("send session",localStorage.session)}),[]);var g=Object(l.c)((function(e){return e.callStatus})),N=Object(l.b)(),k={eventHandlers:{progress:function(e){N({type:"calling"})},failed:function(e){N({type:"failed"}),setTimeout((function(){N({type:"disable"})}),2e4)},ended:function(e){N({type:"ended"}),setTimeout((function(){N({type:"disable"})}),2e4),v(!1)},confirmed:function(e){N({type:"callstart",payload:a})}},mediaConstraints:{audio:!0,video:!1},pcConfig:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]}};m.on("newRTCSession",(function(e){N({type:"connect"});var t=e.session;b(t),t.on("confirmed",(function(){})),t.on("ended",(function(){})),t.on("failed",(function(){})),t.connection.addEventListener("addstream",(function(e){var t=document.createElement("audio");t.srcObject=e.stream,t.play()}))}));var C=function(e){if("Escape"==e)return j.terminate(),void v(!1);if("Backspace"!=e){if("Enter"==e)return""==a?(setTimeout((function(){N({type:"disable"})}),2e4),void N({type:"error"})):(t=a,m.call(t,k),void v(!0));var t;(e<"0"||e>"9")&&"*"!=e&&"#"!=e||i(a+e)}else if(a.length>0){var n=a.substring(0,a.length-1);i(n)}};return Object(h.jsxs)("div",{className:"dial-pad",children:[Object(h.jsxs)("div",{className:"phonenumber",children:[Object(h.jsx)("input",{type:"text",placeholder:"Type phone number",className:"phonenumber-input",value:a,onKeyDown:function(e){return C(e.key)}}),Object(h.jsx)(o.a,{className:"backspace",onClick:function(){return C("Backspace")}})]}),Object(h.jsx)("div",{className:"line"}),Object(h.jsx)("div",{className:"call-status",children:g}),Object(h.jsxs)("div",{className:"grid-number",children:[Object(h.jsx)("div",{className:"number",onClick:function(){return C("1")},children:"1"}),Object(h.jsxs)("div",{className:"number",onClick:function(){return C("2")},children:["2",Object(h.jsx)("div",{className:"text",children:"ABC"})]}),Object(h.jsxs)("div",{className:"number",onClick:function(){return C("3")},children:["3",Object(h.jsx)("div",{className:"text",children:"DEF"})]}),Object(h.jsxs)("div",{className:"number",onClick:function(){return C("4")},children:["4",Object(h.jsx)("div",{className:"text",children:"GHI"})]}),Object(h.jsxs)("div",{className:"number",onClick:function(){return C("5")},children:["5",Object(h.jsx)("div",{className:"text",children:"JKL"})]}),Object(h.jsxs)("div",{className:"number",onClick:function(){return C("6")},children:["6",Object(h.jsx)("div",{className:"text",children:"MNO"})]}),Object(h.jsxs)("div",{className:"number",onClick:function(){return C("7")},children:["7",Object(h.jsx)("div",{className:"text",children:"PQRS"})]}),Object(h.jsxs)("div",{className:"number",onClick:function(){return C("8")},children:["8",Object(h.jsx)("div",{className:"text",children:"TUV"})]}),Object(h.jsxs)("div",{className:"number",onClick:function(){return C("9")},children:["9",Object(h.jsx)("div",{className:"text",children:"WXYZ"})]}),Object(h.jsx)("div",{className:"number",onClick:function(){return C("*")},children:"*"}),Object(h.jsx)("div",{className:"number",onClick:function(){return C("0")},children:"0"}),Object(h.jsx)("div",{className:"number",onClick:function(){return C("#")},children:"#"})]}),0==p?Object(h.jsx)("div",{className:"call-btn",onClick:function(){return C("Enter")},children:Object(h.jsx)(o.b,{})}):Object(h.jsx)("div",{className:"off-btn",onClick:function(){return C("Escape")},children:Object(h.jsx)(o.b,{})}),Object(h.jsx)("audio",{ref:x,type:"audio"})]})},x=(n(119),function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),i=Object(r.a)(a,2),o=i[0],u=i[1],d=Object(c.useState)(""),j=Object(r.a)(d,2),b=j[0],m=j[1],O=Object(c.useState)(""),v=Object(r.a)(O,2),x=v[0],g=v[1],N=Object(c.useState)({status:"",email:"",session:""}),k=Object(r.a)(N,2),C=k[0],y=k[1],S=Object(c.useState)(""),w=Object(r.a)(S,2),E=w[0],A=w[1],P=Object(l.c)((function(e){return e.load})),L=Object(l.b)();Object(c.useEffect)((function(){f.a.get("https://geolocation-db.com/json/").then((function(e){A(e.data.IPv4)})).then((function(){localStorage.session&&f.a.get("".concat(p,"/checksession?session=").concat(localStorage.session)).then((function(e){y(e.data)}))})).then((function(){L({type:"load"})}))}),[]),Object(c.useEffect)((function(){switch(C.status){case"Login sucessfully":L({type:"login"}),localStorage.session=C.session;break;case"needEmail":break;case"need2FA":f.a.get("".concat(p,"/GenPasscode?username=").concat(n,"&password=").concat(o,"&email=").concat(C.email));break;case"Wrong2FA":alert("Please enter correct passcode");case"WrongAccount":alert("Please enter correct username or password")}}),[C]);return P?Object(h.jsxs)("div",{className:"login-page",children:[Object(h.jsx)("h1",{className:"login-title",children:"Login Page"}),""===C.status||"WrongAccount"===C.status?Object(h.jsxs)("div",{className:"login",children:[Object(h.jsx)("input",{type:"text",placeholder:"Enter your username",className:"username",value:n,onChange:function(e){return s(e.target.value)}}),Object(h.jsx)("input",{type:"text",placeholder:"Enter your password",className:"password",value:o,onChange:function(e){return u(e.target.value)}}),Object(h.jsx)("button",{className:"login-btn",onClick:function(){f.a.get("".concat(p,"/login?username=").concat(n,"&password=").concat(o,"&ip=").concat(E)).then((function(e){return y(e.data)})).catch((function(e){return console.log(e)}))},children:"Login"})]}):"needEmail"===C.status?Object(h.jsxs)("div",{className:"need-phone-number",children:[Object(h.jsx)("input",{type:"text",className:"phone-number",placeholder:"We need email to send passcode",onChange:function(e){return m(e.target.value)},value:b}),Object(h.jsx)("button",{className:"add-phonenumber-btn",onClick:function(){f.a.post("".concat(p,"/addemail"),{username:n,password:o,email:b,ip:E}).then((function(e){return y(e.data)})).catch((function(e){return console.log(e)}))},children:"Add"})]}):Object(h.jsxs)("div",{className:"need2FA",children:[Object(h.jsx)("input",{type:"text",className:"passcode",placeholder:"Enter passcode have been send",onChange:function(e){return g(e.target.value)},value:x}),Object(h.jsx)("button",{className:"cer-passcode",onClick:function(){f.a.get("".concat(p,"/certpasscode?username=").concat(n,"&password=").concat(o,"&passcode=").concat(x,"&ip=").concat(E)).then((function(e){y(e.data)}))},children:"Sent"})]})]}):Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"Loadding..."})})});var g=function(e){var t=e.socket,n=Object(l.c)((function(e){return e.login}));return Object(h.jsx)("div",{className:"App",children:n?Object(h.jsx)(v,{socket:t}):Object(h.jsx)(x,{})})},N=n(63),k={callStatus:"",incall:!1,login:!1,load:!1},C=Object(N.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"disable":return Object.assign({},e,{callStatus:""});case"calling":return Object.assign({},e,{callStatus:"Calling..."});case"error":return Object.assign({},e,{callStatus:"Phone number empty !!!"});case"ended":return Object.assign({},e,{callStatus:"Call ended"});case"callstart":return Object.assign({},e,{callStatus:"Call with ".concat(t.payload)});case"connect":return Object.assign({},e,{callStatus:"Connecting"});case"failed":return Object.assign({},e,{callStatus:"Failed"});case"login":return Object.assign({},e,{login:!0});case"load":return Object.assign({},e,{load:!0});default:return e}})),y=C,S=n(62),w=Object(S.a)(p);i.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(l.a,{store:y,children:Object(h.jsx)(g,{socket:w})})}),document.getElementById("root"))},68:function(e,t,n){},69:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.d0b5b864.chunk.js.map